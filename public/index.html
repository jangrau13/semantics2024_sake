<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fragment Viewer</title>
    <!-- Include HTMX -->
    <script src="https://unpkg.com/htmx.org"></script>
    <style>
        body {
            background-color: whitesmoke;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            width: 100vw;
        }

        #header {
            width: 100%;
            background-color: #f8f8f8;
            padding: 20px 10px;
            text-align: center;
        }

        #content-container {
            display: flex;
            width: 100%;
            flex: 1; /* Flexibly expand to take up remaining height */
            max-width: 1200px; /* Adjust this value based on your preference */
        }

        #fragment-container {
            flex-grow: 1; /* Takes remaining horizontal space */
            margin-right: 10px; /* Space between fragment container and sidebar */
        }

        #sidebar {
            width: 300px; /* Set the width of the sidebar */
            background-color: lightgray;
            padding: 10px;
            overflow-y: auto; /* Enable scrolling for sidebar if content is long */
        }

        #pdf_utils {
            display: none;
        }
    </style>
</head>
<body>
<div id="header">
    <h1>My PDF Annotator</h1>
</div>
<div id="content-container">
    <div id="fragment-container">
        <!-- Button to load content from viewer_fragment.html -->
        <button hx-get="viewer_fragment.html" hx-target="#fragment-container" hx-trigger="click">
            Load Content
        </button>
        <!-- Container where the fragment will be loaded -->
    </div>
    <div id="sidebar">
        <h2>Sidebar</h2>
        <div id="pdf_utils">
            <div id="testJan">
                <button id="zoomOut" title="Zoom Out" tabindex="21"
                        data-l10n-id="pdfjs-zoom-out-button">
                    <span data-l10n-id="pdfjs-zoom-out-button-label">Zoom Out</span>
                </button>
                <button id="zoomIn" title="Zoom In" tabindex="22"
                        data-l10n-id="pdfjs-zoom-in-button">
                    <span data-l10n-id="pdfjs-zoom-in-button-label">Zoom In</span>
                </button>
                <button title="Previous Page" id="previous" tabindex="13"
                        data-l10n-id="pdfjs-previous-button">
                    <span data-l10n-id="pdfjs-previous-button-label">Previous</span>
                </button>
                <button title="Next Page" id="next" tabindex="14"
                        data-l10n-id="pdfjs-next-button">
                    <span data-l10n-id="pdfjs-next-button-label">Next</span>
                </button>
                <span class="loadingInput start">
                <div id="findbarInputContainer">
            <span class="loadingInput end">
              <input id="findInput" title="Find" placeholder="Find in documentâ€¦" tabindex="91"
                     data-l10n-id="pdfjs-find-input" aria-invalid="false">
            </span>
                    <div class="splitToolbarButton">
                        <button id="findPrevious"
                                title="Find the previous occurrence of the phrase" tabindex="92"
                                data-l10n-id="pdfjs-find-previous-button">
                            <span data-l10n-id="pdfjs-find-previous-button-label">Previous</span>
                        </button>
                        <button id="findNext" title="Find the next occurrence of the phrase"
                                tabindex="93" data-l10n-id="pdfjs-find-next-button">
                            <span data-l10n-id="pdfjs-find-next-button-label">Next</span>
                        </button>
                    </div>
                    <button id="download" title="Save" tabindex="42"
                            data-l10n-id="pdfjs-save-button">
                                <span data-l10n-id="pdfjs-save-button-label">Save</span>
                            </button>
                    <button id="secondaryOpenFile" title="Open File" tabindex="51"
                            data-l10n-id="pdfjs-open-file-button">
                        <span data-l10n-id="pdfjs-open-file-button-label">Open</span>
                    </button>
                    <button id="firstPage" title="Go to First Page" tabindex="56"
                            data-l10n-id="pdfjs-first-page-button">
                        <span data-l10n-id="pdfjs-first-page-button-label">Go to First Page</span>
                    </button>
                    <button id="lastPage" title="Go to Last Page" tabindex="57"
                            data-l10n-id="pdfjs-last-page-button">
                        <span data-l10n-id="pdfjs-last-page-button-label">Go to Last Page</span>
                    </button>
                    <label>Jump to Page</label>
                    <input type="number" id="pageNumber"  title="Page" value="1" min="1"
                           tabindex="15"
                           data-l10n-id="pdfjs-page-input" autocomplete="off">
                    <span id="numPages"></span>
                    <button id="editorHighlight" class="toolbarButton" disabled="disabled"
                            title="Highlight" role="radio" aria-checked="false"
                            aria-controls="editorHighlightParamsToolbar" tabindex="31"
                            data-l10n-id="pdfjs-editor-highlight-button">
                                    <span data-l10n-id="pdfjs-editor-highlight-button-label">Highlight</span>
                                </button>

            </div>
            <div id="scaleSelectContainer">
                <select id="scaleSelect" title="Zoom" tabindex="23" data-l10n-id="pdfjs-zoom-select">
                    <option id="pageAutoOption" title="" value="auto" selected="selected"
                            data-l10n-id="pdfjs-page-scale-auto">Automatic Zoom
                    </option>
                    <option id="pageActualOption" title="" value="page-actual" data-l10n-id="pdfjs-page-scale-actual">
                        Actual
                        Size
                    </option>
                    <option id="pageFitOption" title="" value="page-fit"
                            data-l10n-id="pdfjs-page-scale-fit">Page Fit
                    </option>
                    <option id="pageWidthOption" title="" value="page-width" data-l10n-id="pdfjs-page-scale-width">Page
                        Width
                    </option>
                    <option id="customScaleOption" title="" value="custom" disabled="disabled" hidden="true"
                            data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 0 }'>0%
                    </option>
                    <option title="" value="0.5" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 50 }'>50%
                    </option>
                    <option title="" value="0.75" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 75 }'>75%
                    </option>
                    <option title="" value="1" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 100 }'>100%
                    </option>
                    <option title="" value="1.25" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 125 }'>125%
                    </option>
                    <option title="" value="1.5" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 150 }'>150%
                    </option>
                    <option title="" value="2" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 200 }'>200%
                    </option>
                    <option title="" value="3" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 300 }'>300%
                    </option>
                    <option title="" value="4" data-l10n-id="pdfjs-page-scale-percent"
                            data-l10n-args='{ "scale": 400 }'>400%
                    </option>
                </select>
            </div>
            </div>
        </div>
    </div>

    <script>
        function checkViewer() {
            // Use a delay to allow HTMX to load content, or adjust according to how HTMX operates
            const intervalId = setInterval(() => {
                const viewerExists = document.querySelector('#fragment-container #viewer') !== null;

                document.getElementById('pdf_utils').style.display = viewerExists ? 'block' : 'none';
                if (viewerExists) {
                    clearInterval(intervalId)
                }
            }, 1000); // Adjust timeout as needed based on testing
        }

        checkViewer();
    </script>
</body>
</html>
